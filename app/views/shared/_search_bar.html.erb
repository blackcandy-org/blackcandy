<div class='o-flex o-flex--align-center'>
  <div class='o-flex__item o-flex__item--grow-1 o-flex__item--basic-0'>
  </div>
  <%= form_tag search_path, method: :get, class: "c-search c-input-group o-flex__item", data: {action: "search#submit", controller: "search"} do %>
      <div class='c-input-group__icon'>
        <%= icon_tag "search", size: "large" %>
      </div>

      <%= text_field_tag "query", query, class: "c-input", data: {"search-target" => "input", "test-id" => "search_input"}, autocomplete: "on" %>

      <div class='c-input-group__icon'>
        <%= loader_tag size: "small" %>
      </div>
  <% end %>

  <div class='o-flex o-flex--align-center o-flex__item o-flex__item--grow-1 o-flex__item--basic-0'>
    <%= render DropdownComponent.new(class: "u-ml-auto", test_id: "search_bar_menu") do |component| %>
      <% component.with_toggle do %>
        <%= avatar_tag current_user %>
      <% end %>

      <%= component.with_menu_item(:link, t("label.settings"), setting_path) %>
      <%= component.with_menu_item(:link, t("label.manage_users"), users_path) if is_admin? %>
      <%= component.with_menu_item(:link, t("label.update_profile"), edit_user_path(current_user)) %>
      <%= component.with_menu_item(:button, t("button.logout"), current_session, method: :delete) %>
    <% end %>
  </div>
</div>
